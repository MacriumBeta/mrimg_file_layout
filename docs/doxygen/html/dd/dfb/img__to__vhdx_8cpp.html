<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Macrium Image File Layout: mrimg_file_layout/src/img_to_vhdx/img_to_vhdx.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../ReflectX_small.png"/></td>
  <td id="projectalign">
   <div id="projectname">Macrium Image File Layout
   </div>
   <div id="projectbrief">Source Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dd/dfb/img__to__vhdx_8cpp.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">img_to_vhdx.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;windows.h&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d0/de7/file__reader_8h_source.html">..\libs\file_reader\file_reader.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d05/vhdx__manager_8h_source.html">..\libs\vhdx_manager\vhdx_manager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d8d/restore_8h_source.html">..\libs\restore\restore.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/dff/console__print_8h_source.html">console_print.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/d44/arg__validator_8h_source.html">arg_validator.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/dbc/vhdx__handler_8h_source.html">vhdx_handler.h</a>&quot;</code><br />
</div>
<p><a href="../../dd/dfb/img__to__vhdx_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8836a06a7b1849bd2fa3865c347e673a" id="r_a8836a06a7b1849bd2fa3865c347e673a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d6d/structfile__structs_1_1file_layout.html">file_structs::fileLayout</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8836a06a7b1849bd2fa3865c347e673a">handleBackupFile</a> (const std::wstring &amp;filename, const std::string &amp;password)</td></tr>
<tr class="memdesc:a8836a06a7b1849bd2fa3865c347e673a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the backup file.  <br /></td></tr>
<tr class="separator:a8836a06a7b1849bd2fa3865c347e673a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1325efcce4a4b1b4ea52247f0a0a0c1" id="r_ae1325efcce4a4b1b4ea52247f0a0a0c1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae1325efcce4a4b1b4ea52247f0a0a0c1">wmain</a> (int argc, wchar_t *argv[])</td></tr>
<tr class="memdesc:ae1325efcce4a4b1b4ea52247f0a0a0c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main function of the program.  <br /></td></tr>
<tr class="separator:ae1325efcce4a4b1b4ea52247f0a0a0c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8836a06a7b1849bd2fa3865c347e673a" name="a8836a06a7b1849bd2fa3865c347e673a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8836a06a7b1849bd2fa3865c347e673a">&#9670;&#160;</a></span>handleBackupFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d6d/structfile__structs_1_1file_layout.html">file_structs::fileLayout</a> handleBackupFile </td>
          <td>(</td>
          <td class="paramtype">const std::wstring &amp;</td>          <td class="paramname"><span class="paramname"><em>filename</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>password</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the backup file. </p>
<p>This function reads the backup file and parses its JSON data into a backupFile object. If the backup file is an intermediate split file, it throws a runtime error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The name of the backup file. </td></tr>
    <tr><td class="paramname">password</td><td>The password for the backup file (optional). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The backupFile object that holds the parsed JSON data from the backup file. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::runtime_error</td><td>If the backup file is an intermediate split file. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/dfb/img__to__vhdx_8cpp_source.html#l00164">164</a> of file <a class="el" href="../../dd/dfb/img__to__vhdx_8cpp_source.html">img_to_vhdx.cpp</a>.</p>

</div>
</div>
<a id="ae1325efcce4a4b1b4ea52247f0a0a0c1" name="ae1325efcce4a4b1b4ea52247f0a0a0c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1325efcce4a4b1b4ea52247f0a0a0c1">&#9670;&#160;</a></span>wmain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wmain </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>argc</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wchar_t *</td>          <td class="paramname"><span class="paramname"><em>argv</em>[]</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The main function of the program. </p>
<p>This function is the entry point of the program. It sets the console code page to UTF-8, prints a disclaimer, and then handles the command line parameters, backup file, and VHDX file. If the 'describe' flag is set, it outputs the backup file's structure and content and then exits the program. Otherwise, it restores the first disk (or entered disk number) to the VHDX file and waits for the user to press any key before dismounting the VHDX file and exiting the program. If any exceptions occur, it prints them to the console and returns 1. Otherwise, it returns 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>The number of command line parameters. </td></tr>
    <tr><td class="paramname">argv</td><td>The command line parameters. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the program runs successfully, or 1 if an exception occurs. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/dfb/img__to__vhdx_8cpp_source.html#l00073">73</a> of file <a class="el" href="../../dd/dfb/img__to__vhdx_8cpp_source.html">img_to_vhdx.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_88e100402737e4fa918e4aa5a7dba644.html">mrimg_file_layout</a></li><li class="navelem"><a class="el" href="../../dir_34285ecb0ee8fd6ba963d985ce135e66.html">src</a></li><li class="navelem"><a class="el" href="../../dir_15e1882d1c4de72b3c83b902cb5faff2.html">img_to_vhdx</a></li><li class="navelem"><a class="el" href="../../dd/dfb/img__to__vhdx_8cpp.html">img_to_vhdx.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
